Новый проект детектора транспорта на flask без php
сделан на python3, т.к. в python2 есть проблемы в работе с сокетами

25.01 начали. исследовал возможность запуска тредов. проверил, работает.

26.01 	- (Сделано) импортировать основную логику - бывший main.py, переименовать его в carDetector
	- (Сделано) сделать загрузку полигонов из файла при старте программы	
	- (Сделано) отображать состояния полигонов на web странице в реальном времени красный, зеленый.
	- (Сделано) сделать корректное отображение строки "Режим редактирования"
	- (Сделано) сделать, чтоб желтые уголки полигона пропадали не в режиме редактирования
	- (Сделано) сделать чтоб продолжало работать при выключенном web 
	- (Сделано) доделать и проверить работу камеры в linux 
	- (Сделано) сделать корректную работу кнопки удалить все
	- (Сделано) сделать передачу и работу стрелок и режимов рамки

	- добавить прогу в автозагрузку linux	
	- сделать другой алгоритм поиска направления движения
	- сделать при удалении полигона, чтоб его номер оставался (не понятно как тогда быть если есть полигоны 2,3,4 и надо создать 5. прога его будет нумеровать 1 или 5?)
	- сделать бродкаст искалок узлов
	- сделать правильную картинку в windows - размер чтоб соответствовал размеру фрейма в web
	- сделать кнопку помощь и справку

Проблема: если нажать в web редактировать и сразу сохранить, не редактируя полигоны, грузятся тестовые рамки... при проверке не воспроизвелось....


(Решено)проблема:
	пусть есть 2 питон файла, рабочий 1, в него импортируется 2-й. переменная из второго модифицируется в первом. что будет с ней при выводе ее во втором. 
	проверяем. на тесте. 
	Результаты теста: перекрестные ссылки (1 на 2 и 2 на 1) запрещены. можно только один импорт. например 1 в 2. Тогда переменная в 2 которой там нет, окажется неопределенной.
	Вопрос возник из-за путей. в 2-[] файлах. придется пути писать в первом и передавать их в функции в качестве аргументов во втором. 
	глобальный итог: Надо писать чистые классы, работоспособные после переноса и модификации программы. и не пользоваться глобальными переменными. 
	проблема снята.

(Решено)проблема:
	модуль Camera() отдает битовые последовательности. в обработке нужны обычные картинки. есть 2 пути решения: 
	- можно 2 штуки сразу в кортеже отдавать из Camera() - бит последовательность и картинку. 
	- можно отдавать картинку, и только потом ее уже в app переводить в последовательность и отдавать в web для индикации. 
	- решено дописыванием нового метода с выдачей в нужном формате

(Заговнокодено)проблема:
	прога вылетает при закрытии web страницы -  картинка в распознавалке оказывается пустой. проблема была в вызове деструктора, решение - пока деструктор закоментил. 

(Решено)Проблема: 
	модуль PIcamera если делать 2 треда, то в одном из них картинка оказывается None. Возможный выход - только один тред и последовательная конвертация из формата
	для web в формат для cv2. Лучше бы конечно наоборот - сначала в cv2 и из него уже в web stream. надо читать про stream. первый вариант прокатил. время цикла заметно увеличилось 
	с 45 мс до 75-100 второй вариант много лучше, т.к. не происходит кодировани и декодирования. Второй вариант тоже прокатил, он лучше первого, т.к. происходит только кодирование в 		jpeg и только когда работает web. доп задержек нет. 		


	